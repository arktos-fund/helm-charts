# -- ServiceAccount configuration
serviceAccount:
  # -- Specifies whether a ServiceAccount should be created
  create: false
  # -- Annotations to add to the ServiceAccount
  annotations: {}
  # -- The name of the ServiceAccount to use.
  name: ""

# -- Gateway configuration
gateway:
  # -- Specifies whether a Gateway should be created
  image:
    # -- The image repository
    repository: quay.io/arktos-venture/ibkr-gateway
    # -- The image pull policy
    pullPolicy: IfNotPresent
    # -- The image tag
    tag: ""

  # -- imagePullSecrets is an optional list of references to secrets in the same namespace to use for pulling any of the images used by this Chart.
  imagePullSecrets: []
  # -- nameOverride is an optional string to substitute for the full names of resources
  nameOverride: ""
  # -- fullnameOverride is an optional string to substitute for the full names of resources
  fullnameOverride: ""

  # -- env is a list of environment variables to set in the container.
  env: []
    # - name: VNC_SERVER_PASSWORD
    #   valueFrom:
    #     secretKeyRef:
    #       name: credentials
    #       key: vnc

  # -- debug enables debug mode
  debug: false
  # -- config is a list of parameters to pass to the gateway
  config: 
    # credentials: config.ini key
    credentials: "credentials"
    # workers: config.yaml key
    workers: "workers"
    live: true

  # -- podAnnotations is an optional list of annotations to add to the pod
  podAnnotations: {}
  # -- podSecurityContext is an optional security context to add to the pod
  podSecurityContext:
    fsGroup: 10001

  # -- securityContext is an optional security context to add to the container
  securityContext:
    capabilities:
      drop:
      - ALL
    readOnlyRootFilesystem: false
    runAsNonRoot: true
    runAsUser: 10001

  # -- jvm is a list of parameters to pass to the JVM
  jvm:
    # -- Xmx is the maximum heap size
    Xmx: "2G"
    # -- Xms is the initial heap size
    Xms: "2G"
    # -- Xmn is the minimum heap size
    XX:
      ConcGCThreads: 5
      InitiatingHeapOccupancyPercent: 70
      ParallelGCThreads: 20
      MaxGCPauseMillis: 200
    installer:
      uuid: "3046c7e3-ffbd-4699-a848-117342ff43ee"

  # -- resources is an optional list of resources to set for the container
  resources:
    limits:
      cpu: 300m
      memory: 2100Mi
    requests:
      cpu: 300m
      memory: 2100Mi

nodeSelector:
  kubernetes.io/os: linux

tolerations: []

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
          - key: kubernetes.io/arch
            operator: In
            values:
              - amd64
